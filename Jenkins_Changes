/*This script shows how to get basic information about a job and its builds*/
node{
 stage("last-changes") {
 git credentialsId: 'github', 
 git url: 'https://github.com/SanjaiE/dockeransiblejenkins.git'
def publisher = LastChanges.getLastChangesPublisher "PREVIOUS_REVISION", "SIDE", "LINE", true, true, "", "", "", "", ""
publisher.publishLastChanges()
def changes = publisher.getLastChanges()
println(changes.getEscapedDiff())
     for (commit in changes.getCommits()) {
                  println(commit)
                  def jobName = "myJob"
                  def job = jenkins.getItem(jobName)
                  def commitInfo = commit.getCommitInfo()
                  println(commitInfo.getCommitterName())
                  println(commitInfo.getCommitDate())
                  println(commitInfo.getCommitMessage())
                  println(commit.getChanges())
                  println(commitInfo.getCommitCurrentJob())
                  println(commitInfo.getCommitBuild())
                  println (commitInfo.getClass())
                  println (commitInfo.getBuilding())
                  println (commitInfo.getInQueue())
                  println Last successfull build: (job.getLastSuccessfulBuild())
                  println Last build: (job.getLastBuild())
                  println(commitInfo)
                  }
                  }
